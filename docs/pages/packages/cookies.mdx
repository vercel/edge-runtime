import { Tabs, Tab } from '../../components/tabs'

# Edge Runtime Cookies

The **@edge-runtime/cookies** package provides high-level HTTP Cookie
abstractions for Edge-compatible environments, such as Edge Runtime or Vercel
Edge Functions and Edge Middleware.

The available methods are based on the [`CookieStore API`](https://wicg.github.io/cookie-store/#CookieStore).
The main difference is that the methods are not asynchronous so they do not return a `Promise`.

## Installation

<Tabs items={['npm', 'yarn', 'pnpm']} storageKey="selected-pkg-manager">
  <Tab>
    ```sh
    npm install @edge-runtime/cookies --save
    ```
  </Tab>
  <Tab>
    ```sh
    yarn add @edge-runtime/cookies
    ```
  </Tab>
  <Tab>
    ```sh
    pnpm install @edge-runtime/cookies --save
    ```
  </Tab>
</Tabs>

## Usage

### for Request

To access and manipulate request cookies, use the exported `RequestCookies` constructor:

```ts
import { RequestCookies } from '@edge-runtime/cookies'

function handleRequest(req: Request) {
  const cookies = new RequestCookies(req.headers)
  cookies.get('cookie-name')?.value // undefined | string
  cookies.has('cookie-name') // boolean
  // do something...
}
```

Notes:

- All mutations are performed in place and will update the `Cookie` header in
  the provided `Request` object.

- When mutating the request cookies, the client won't be able to read the
  updated/deleted cookies. Please use `ResponseCookies` for that.

#### Available methods

- `cookies.get()` returns the value of the cookie. The cookie configuration
  (`Max-Age`, `Path` etc) is not being passed by the HTTP client, therefore it's
  not possible to determine the cookie expiration date.

### for Response

To access and manipulate response cookies that will persist in the HTTP client,
use the exported `ResponseCookies` constructor:

```ts
import { ResponseCookies } from '@edge-runtime/cookies'

function handleRequest(req: Request) {
  // do something
  const cookies = new ResponseCookies(new Headers())
  cookies.set('cookie-name', 'cookie-value', { maxAge: 1000 }) // make cookie persistent for 1000 seconds
  cookies.delete('old-cookie')
  return response
}
```

Notes:

- All mutations are performed in-place and will update the `Set-Cookie` headers
  in the provided `Response` object.

#### Available methods

- `cookies.set()` sets a cookie with the provided name and value. The cookie
  configuration (`Max-Age`, `Path` etc) is passed as an optional argument.

- `cookies.delete()` deletes a cookie with the provided name by setting an empty
  value with an expiration date in the past.
